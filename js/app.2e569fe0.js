(function(n){function t(t){for(var i,a,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(n[i]=c[i]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),e()}function e(){for(var n,t=0;t<r.length;t++){for(var e=r[t],i=!0,s=1;s<e.length;s++){var c=e[s];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),n=a(a.s=e[0]))}return n}var i={},o={app:0},r=[];function a(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=n,a.c=i,a.d=function(n,t,e){a.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},a.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,t){if(1&t&&(n=a(n)),8&t)return n;if(4&t&&"object"===typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)a.d(e,i,function(t){return n[t]}.bind(null,i));return e},a.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return a.d(t,"a",t),t},a.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},a.p="/apollonian-gasket/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=c;r.push([0,"chunk-vendors"]),e()})({0:function(n,t,e){n.exports=e("56d7")},"034f":function(n,t,e){"use strict";var i=e("85ec"),o=e.n(i);o.a},1:function(n,t){},2:function(n,t){},3:function(n,t){},4:function(n,t){},"56d7":function(n,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i,o,r=e("2b0e"),a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{attrs:{id:"app"}},[e("Adjust",{on:{"depth-change":n.updateDepth}}),e("Prolog",{attrs:{triangle:n.triangle,depth:1},on:{"circles-change":n.updateCircles}}),e("Canvas",{attrs:{width:n.width,height:n.height,circles:n.circles,triangle:n.triangle},on:{"triangle-change":n.updateTriangle}})],1)},s=[],c=(e("a434"),function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"container"},[e("h1",[n._v("Apollonian Gasket")]),e("div",{staticClass:"right"},[e("h2",[n._v("Depth: "+n._s(n.depth))]),e("input",{directives:[{name:"model",rawName:"v-model",value:n.depth,expression:"depth"}],staticClass:"slider",attrs:{type:"range",min:"0",max:"10"},domProps:{value:n.depth},on:{input:n.update,__r:function(t){n.depth=t.target.value}}})])])}),l=[],p={name:"Adjust",data:function(){return{depth:0}},methods:{update:function(){this.$emit("depth-change",this.depth)}}},u=p,d=(e("aefd"),e("2877")),h=Object(d["a"])(u,c,l,!1,null,"2a8efb03",null),g=h.exports,X=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("canvas",{attrs:{id:"canvas",width:n.width,height:n.height}})},Y=[],f=(e("cb29"),e("c740"),e("4160"),e("a9e3"),e("159b"),e("7cb4")),C=e.n(f),A='% point(ID, X, Y) :- X >= 0, Y >= 0. %ID type check\n%\n%\n% triangle(ID, P1, P2, P3) :-\n%   point(P1, AX, AY), point(P2, BX, BY), point(P3, CX, CY).\n\n% sides(Triangle, A, B, C, D1, D2, D3):-\n%   triangle(Triangle, A, B, C), point(A, AX, AY), point(B, BX, BY), point(C, CX, CY),\n%   distance()\n\n\n% distance(A, B, D) :-\n%   point(A, X1, Y1),\n%   point(B, X2, Y2),\n%   D is sqrt((X2-X1)^2 + (Y2-Y1)^2).\n\n% triangle()\n% point(a,5,2).\n% point(b,4,0).\n% point(c,2,3).\n% point(d,5,2).\n\n% point(ID, X, Y)\n%\n% % P1 :- point("P1", 1, 1).\n% point("P2", 2, 1).\n% point("P3", 3, 1).\n%\n% let P1 = point(1,1)\n%\n% T1 = triangle(P1, P2, P3)\n%\n% Gasket(T1, C)\n% C=[circle,...]\n\npoint(X, Y) :- X >= 0, Y >= 0. %ID type check\n\n% circle(point(X,Y), R) :-\n\ntriangle(point(XA, YA), point(XB, YB), point(XC, YC)) :-\n  point(XA, YA) \\= point(XB, YB),\n  point(XA, YA) \\= point(XC, YC),\n  point(XB, YB) \\= point(XC, YC).\n\ndistance(point(X1, Y1), point(X2, Y2), D) :-\n  D is sqrt((X2-X1)^2 + (Y2-Y1)^2).\n\nsides(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), DA, DB, DC) :-\n  DA is sqrt((XB-XC)^2 + (YB-YC)^2),\n  DB is sqrt((XA-XC)^2 + (YA-YC)^2),\n  DC is sqrt((XA-XB)^2 + (YA-YB)^2).\n\ncircles(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), RA, RB, RC) :-\n  sides(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), A, B, C),\n  RA is 1/2*(-A+B+C),\n  RB is 1/2*( A-B+C),\n  RC is 1/2*( A+B-C).\n\n\ndescartes(R1, R2, R3, RI, RO) :-\n  K1 is 1/R1, % todo +/-\n  K2 is 1/R2,\n  K3 is 1/R3,\n  KI is (K1 + K2 + K3 + 2*sqrt(K1*K2 + K2*K3 + K3*K1)),\n  KO is (K1 + K2 + K3 - 2*sqrt(K1*K2 + K2*K3 + K3*K1)),\n  RI is abs(1/KI),\n  RO is abs(1/KO).\n\n\n% Calculate Outer Circle for triangle\n% todo circle(point(X,Y), R)\n% outer(triangle(point(1, 1), point(3, 1), point(2, 3)), X, Y, R).\nouter(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), X, Y, R):-\n  sides(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), A, B, C),\n  S is 1/2*(A+B+C),\n  Delta is sqrt(S*(S-A)*(S-B)*(S-C)), % Herons Formula,\n  U is A - (Delta/(S - A)),\n  V is B - (Delta/(S - B)),\n  W is C - (Delta/(S - C)),\n  R1 is 1/2*(-A+B+C),\n  R2 is 1/2*( A-B+C),\n  R3 is 1/2*( A+B-C),\n  descartes(R1, R2, R3, _, R),\n  X is (U*XA + V*XB + W*XC) / (U+V+W),\n  Y is (U*YA + V*YB + W*YC) / (U+V+W).\n\n% Calculate Inner Circle for triangle\n% todo circle(point(X,Y), R)\n% inner(triangle(point(1, 1), point(3, 1), point(2, 3)), X, Y, R).\ninner(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), X, Y, R):-\n  sides(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), A, B, C),\n  S is 1/2*(A+B+C),\n  Delta is sqrt(S*(S-A)*(S-B)*(S-C)), % Herons Formula,\n  U is A + (Delta/(S - A)),\n  V is B + (Delta/(S - B)),\n  W is C + (Delta/(S - C)),\n  R1 is 1/2*(-A+B+C),\n  R2 is 1/2*( A-B+C),\n  R3 is 1/2*( A+B-C),\n  descartes(R1, R2, R3, R, _),\n  X is (U*XA + V*XB + W*XC) / (U+V+W),\n  Y is (U*YA + V*YB + W*YC) / (U+V+W).\n\n\n\n% gasket(triangle(point(1, 1), point(3, 1), point(2, 3)).\ngasket(triangle(point(XA, YA), point(XB, YB), point(XC, YC))):-\n  % circles(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), RA, RB, RC),\n  inner(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), XI, YI, RI),\n  outer(triangle(point(XA, YA), point(XB, YB), point(XC, YC)), XO, YO, RI),\n  gasket(triangle(point(XA, YA), point(XB, YB), point(XI, YI))),\n  gasket(triangle(point(XA, YA), point(XC, YC), point(XI, YI))),\n  gasket(triangle(point(XB, YB), point(XC, YC), point(XI, YI))),\n  gasket(triangle(point(XA, YA), point(XB, YB), point(XO, YO))),\n  gasket(triangle(point(XA, YA), point(XC, YC), point(XO, YO))),\n  gasket(triangle(point(XB, YB), point(XC, YC), point(XO, YO))).\n\n% circles\n',B={data:function(){return{edit:-1,context:void 0,padding:5}},props:{triangle:Array,circles:Array,height:Number,width:Number},methods:{resetCanvas:function(){this.context.clearRect(0,0,this.width,this.height)},drawTriangle:function(){var n=this;this.triangle.forEach((function(t){n.context.beginPath(),n.context.moveTo(t.x,t.y),n.context.arc(t.x,t.y,5,0,2*Math.PI,!0),n.context.fill()}))},drawCircles:function(){var n=this;this.circles.forEach((function(t){n.context.beginPath(),n.context.arc(t.x,t.y,t.r,0,2*Math.PI,!1),n.context.stroke()}))}},watch:{circles:function(n){this.resetCanvas(),this.drawCircles(),this.drawTriangle()}},mounted:function(){var n=this,t=document.getElementById("canvas");this.context=t.getContext("2d"),this.context.fillStyle="#cddc39",this.context.strokeStyle="#ad1457",this.drawTriangle(this.triangle);var e=function(t,e){return Math.abs(e.x-t.layerX)<n.padding&&Math.abs(e.y-t.layerY)<n.padding};t.onmousedown=function(t){return n.edit=n.triangle.findIndex((function(n){return e(t,n)}))},t.onmouseup=function(t){return n.edit=-1},t.onmousemove=function(t){if(-1!=n.edit){var e=n.triangle.splice(0);e[n.edit].x=t.layerX,e[n.edit].y=t.layerY,n.$emit("triangle-change",e)}}},name:"Canvas"},v=B,m=Object(d["a"])(v,X,Y,!1,null,null,null),R=m.exports,y=(e("99af"),e("a15b"),e("d81d"),e("b0c0"),{data:function(){return{session:C.a.create()}},props:{triangle:Array,depth:Number},methods:{computeCircles:function(){var n=this,t="circles(triangle(".concat(this.triangle.map((function(n){return"point(".concat(n.x,", ").concat(n.y,")")})).join(", "),"), ").concat(this.triangle.map((function(n){return n.name})).join(", "),")."),e=this.session.query(t);!0!==e&&console.log(e);var i=[];this.session.answer((function(t){i=n.triangle.map((function(n){return Object.assign(n,{r:t.lookup(n.name).value})}))})),t="inner(triangle(".concat(this.triangle.map((function(n){return"point(".concat(n.x,", ").concat(n.y,")")})).join(", "),"), X, Y, R)."),e=this.session.query(t),!0!==e&&console.log(e),this.session.answer((function(n){var t={x:n.lookup("X").value,y:n.lookup("Y").value,r:n.lookup("R").value};i.push(t)})),t="outer(triangle(".concat(this.triangle.map((function(n){return"point(".concat(n.x,", ").concat(n.y,")")})).join(", "),"), X, Y, R)."),e=this.session.query(t),!0!==e&&console.log(e),this.session.answer((function(n){var t={x:n.lookup("X").value,y:n.lookup("Y").value,r:n.lookup("R").value};i.push(t)})),this.$emit("circles-change",i)}},watch:{triangle:function(n){this.computeCircles()}},render:function(){return""},created:function(){this.session.consult(A)},mounted:function(){this.computeCircles()},name:"Prolog"}),b=y,x=Object(d["a"])(b,i,o,!1,null,null,null),w=x.exports,D={name:"app",components:{Adjust:g,Canvas:R,Prolog:w},data:function(){return{triangle:[{name:"A",x:550,y:400},{name:"B",x:820,y:450},{name:"C",x:650,y:650}],circles:[],height:window.innerHeight,width:window.innerWidth,depth:0}},methods:{updateTriangle:function(n){this.triangle=n.splice(0)},updateCircles:function(n){this.circles=n.splice(0)},updateDepth:function(n){this.depth=n}}},O=D,P=(e("034f"),Object(d["a"])(O,a,s,!1,null,null,null)),k=P.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(n){return n(k)}}).$mount("#app")},"85ec":function(n,t,e){},aefd:function(n,t,e){"use strict";var i=e("cd2e"),o=e.n(i);o.a},cd2e:function(n,t,e){}});
//# sourceMappingURL=app.2e569fe0.js.map